// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Product {
  id          String   @id @default(uuid())
  name        String
  slug        String   @unique
  description String?  @db.Text
  price       Decimal  @db.Decimal(12, 2)
  
  // External Links
  shopeeLink  String?
  tokpedLink  String?
  
  // Pros & Cons (Disimpan sebagai String separated by comma, ex: "Bagus,Murah,Cepat")
  pros        String?  @db.Text
  cons        String?  @db.Text
  
  images      ProductImage[]
  isFeatured  Boolean  @default(false)
  
  // RELATIONS
  // 1. Category (One-to-Many): Satu produk punya satu kategori utama
  categoryId  String?
  category    Category? @relation(fields: [categoryId], references: [id])

  // 2. Tags (Many-to-Many): Produk bisa punya banyak tag (Smart Home, Gaming, Cheap)
  tags        Tag[]

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ProductImage {
  id        String  @id @default(uuid())
  url       String  // Simpan link gambar eksternal di sini
  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)
  productId String
}
model Category {
  id        String    @id @default(uuid())
  name      String    @unique // Misal: "Field Gear"
  slug      String    @unique // Misal: "field-gear"
  products  Product[]
  createdAt DateTime  @default(now())
}

model Tag {
  id        String    @id @default(uuid())
  name      String    @unique // Misal: "Best Value"
  slug      String    @unique // Misal: "best-value"
  products  Product[] 
  // Nanti di masa depan tinggal tambah: posts Post[]
}

model Post {
  id        String   @id @default(uuid())
  title     String
  slug      String   @unique
  content   String   @db.Text
  thumbnail String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
model SiteSetting {
  id               Int      @id @default(1)
  
  // --- IDENTITY ---
  siteName         String   @default("AffiliatePro") // Nama di pojok kiri atas
  footerAbout      String   @default("Portal review gadget terpercaya.") @db.Text // Konten footer kiri
  
  // --- HERO SECTION ---
  heroTitle        String   @default("Cerdas Memilih, Puas Membeli.")
  heroPromo        String   @default("Promo Akhir Tahun")
  heroDescription  String   @default("Temukan gadget terbaik.") @db.Text
  heroImage        String?  // OPSI BARU: Jika diisi URL, animasi hilang diganti gambar ini
  
  primaryBtnText   String   @default("Mulai Belanja")
  primaryBtnLink   String   @default("#products")
  secondaryBtnText String   @default("Tentang Kami")
  secondaryBtnLink String   @default("/about")

  updatedAt        DateTime @updatedAt
}

// --- NEW MODEL: NAVIGATION ---
model NavbarLink {
  id        String   @id @default(uuid())
  label     String   // Teks menu, misal: "Produk"
  url       String   // Link, misal: "/products"
  order     Int      @default(0) // Urutan menu
  createdAt DateTime @default(now())
}
// ... model Admin, Product, dll tetap
model Admin {
  id        String   @id @default(uuid())
  username  String   @unique
  password  String   // Nanti passwordnya kita simpan text biasa dulu (untuk belajar), idealnya di-hash
  createdAt DateTime @default(now())
}